

> web@0.1.0 dev /Users/gm/project/trip-planner/apps/web
> next dev --turbopack

   [1m[38;2;173;127;168mâ–² Next.js 15.5.4[39m[22m (Turbopack)
   - Local:        http://localhost:3000
   - Network:      http://192.168.3.120:3000
   - Environments: .env.local, .env

 [32m[1mâœ“[22m[39m Starting...
 [32m[1mâœ“[22m[39m Compiled middleware in 135ms
 [32m[1mâœ“[22m[39m Ready in 968ms
Clerk: Refreshing the session token resulted in an infinite redirect loop. This usually means that your Clerk instance keys do not match - make sure to copy the correct publishable and secret keys from the Clerk dashboard.
 [37m[1mâ—‹[22m[39m Compiling /wishlists ...
 [32m[1mâœ“[22m[39m Compiled /wishlists in 1628ms
 [33m[1mâš [22m[39m Unsupported metadata themeColor is configured in metadata export in /wishlists. Please move it to viewport export instead.
Read more: https://nextjs.org/docs/app/api-reference/functions/generate-viewport
 GET /wishlists [32m200[39m in 1860ms
 [33m[1mâš [22m[39m Cross origin request detected from 192.168.3.120 to /_next/* resource. In a future major version of Next.js, you will need to explicitly configure "allowedDevOrigins" in next.config to allow this.
Read more: https://nextjs.org/docs/app/api-reference/config/next-config-js/allowedDevOrigins
 POST /wishlists [32m200[39m in 120ms
 [32m[1mâœ“[22m[39m Compiled /api/wishlists in 389ms
 GET /favicon.ico?favicon.0b3bf435.ico [32m200[39m in 521ms
[GET /api/wishlists] ERROR: Error: Clerk: auth() was called but Clerk can't detect usage of clerkMiddleware(). Please ensure the following:
- Your Middleware exists at ./src/middleware.(ts|js)
- clerkMiddleware() is used in your Next.js Middleware.
- Your Middleware matcher is configured to match this route or page.
- If you are using the src directory, make sure the Middleware file is inside of it.

For more details, see https://clerk.com/err/auth-middleware

    at async ensureDbUser (src/lib/user.ts:7:14)
    at async GET (src/app/api/wishlists/route.ts:28:18)
[0m [90m  5 |[39m
 [90m  6 |[39m [36mexport[39m [36masync[39m [36mfunction[39m ensureDbUser() {
[31m[1m>[22m[39m[90m  7 |[39m   [36mconst[39m cu [33m=[39m [36mawait[39m currentUser()[33m;[39m
 [90m    |[39m              [31m[1m^[22m[39m
 [90m  8 |[39m   [36mif[39m ([33m![39mcu) [36mthrow[39m [36mnew[39m [33mError[39m([32m"UNAUTHENTICATED"[39m)[33m;[39m
 [90m  9 |[39m
 [90m 10 |[39m   [36mconst[39m clerkId [33m=[39m cu[33m.[39mid[33m;[39m [90m// "user_xxx"[39m[0m
 GET /api/wishlists [31m500[39m in 776ms
 [32m[1mâœ“[22m[39m Compiled middleware in 2ms
 [32m[1mâœ“[22m[39m Compiled in 40ms
 [33m[1mâš [22m[39m Unsupported metadata themeColor is configured in metadata export in /wishlists. Please move it to viewport export instead.
Read more: https://nextjs.org/docs/app/api-reference/functions/generate-viewport
 GET /wishlists [32m200[39m in 73ms
 POST /wishlists [32m200[39m in 70ms
 GET /favicon.ico?favicon.0b3bf435.ico [32m200[39m in 288ms
[GET /api/wishlists] ERROR: Error: Clerk: auth() was called but Clerk can't detect usage of clerkMiddleware(). Please ensure the following:
- Your Middleware exists at ./src/middleware.(ts|js)
- clerkMiddleware() is used in your Next.js Middleware.
- Your Middleware matcher is configured to match this route or page.
- If you are using the src directory, make sure the Middleware file is inside of it.

For more details, see https://clerk.com/err/auth-middleware

    at async ensureDbUser (src/lib/user.ts:7:14)
    at async GET (src/app/api/wishlists/route.ts:28:18)
[0m [90m  5 |[39m
 [90m  6 |[39m [36mexport[39m [36masync[39m [36mfunction[39m ensureDbUser() {
[31m[1m>[22m[39m[90m  7 |[39m   [36mconst[39m cu [33m=[39m [36mawait[39m currentUser()[33m;[39m
 [90m    |[39m              [31m[1m^[22m[39m
 [90m  8 |[39m   [36mif[39m ([33m![39mcu) [36mthrow[39m [36mnew[39m [33mError[39m([32m"UNAUTHENTICATED"[39m)[33m;[39m
 [90m  9 |[39m
 [90m 10 |[39m   [36mconst[39m clerkId [33m=[39m cu[33m.[39mid[33m;[39m [90m// "user_xxx"[39m[0m
 GET /api/wishlists [31m500[39m in 330ms
 [32m[1mâœ“[22m[39m Compiled / in 317ms
 [33m[1mâš [22m[39m Unsupported metadata themeColor is configured in metadata export in /. Please move it to viewport export instead.
Read more: https://nextjs.org/docs/app/api-reference/functions/generate-viewport
 GET / [32m200[39m in 2120ms
 [33m[1mâš [22m[39m Unsupported metadata themeColor is configured in metadata export in /wishlists. Please move it to viewport export instead.
Read more: https://nextjs.org/docs/app/api-reference/functions/generate-viewport
 GET /wishlists [32m200[39m in 39ms
[GET /api/wishlists] ERROR: Error: Clerk: auth() was called but Clerk can't detect usage of clerkMiddleware(). Please ensure the following:
- Your Middleware exists at ./src/middleware.(ts|js)
- clerkMiddleware() is used in your Next.js Middleware.
- Your Middleware matcher is configured to match this route or page.
- If you are using the src directory, make sure the Middleware file is inside of it.

For more details, see https://clerk.com/err/auth-middleware

    at async ensureDbUser (src/lib/user.ts:7:14)
    at async GET (src/app/api/wishlists/route.ts:28:18)
[0m [90m  5 |[39m
 [90m  6 |[39m [36mexport[39m [36masync[39m [36mfunction[39m ensureDbUser() {
[31m[1m>[22m[39m[90m  7 |[39m   [36mconst[39m cu [33m=[39m [36mawait[39m currentUser()[33m;[39m
 [90m    |[39m              [31m[1m^[22m[39m
 [90m  8 |[39m   [36mif[39m ([33m![39mcu) [36mthrow[39m [36mnew[39m [33mError[39m([32m"UNAUTHENTICATED"[39m)[33m;[39m
 [90m  9 |[39m
 [90m 10 |[39m   [36mconst[39m clerkId [33m=[39m cu[33m.[39mid[33m;[39m [90m// "user_xxx"[39m[0m
 GET /api/wishlists [31m500[39m in 285ms
[GET /api/wishlists] ERROR: Error: Clerk: auth() was called but Clerk can't detect usage of clerkMiddleware(). Please ensure the following:
- Your Middleware exists at ./src/middleware.(ts|js)
- clerkMiddleware() is used in your Next.js Middleware.
- Your Middleware matcher is configured to match this route or page.
- If you are using the src directory, make sure the Middleware file is inside of it.

For more details, see https://clerk.com/err/auth-middleware

    at async ensureDbUser (src/lib/user.ts:7:14)
    at async GET (src/app/api/wishlists/route.ts:28:18)
[0m [90m  5 |[39m
 [90m  6 |[39m [36mexport[39m [36masync[39m [36mfunction[39m ensureDbUser() {
[31m[1m>[22m[39m[90m  7 |[39m   [36mconst[39m cu [33m=[39m [36mawait[39m currentUser()[33m;[39m
 [90m    |[39m              [31m[1m^[22m[39m
 [90m  8 |[39m   [36mif[39m ([33m![39mcu) [36mthrow[39m [36mnew[39m [33mError[39m([32m"UNAUTHENTICATED"[39m)[33m;[39m
 [90m  9 |[39m
 [90m 10 |[39m   [36mconst[39m clerkId [33m=[39m cu[33m.[39mid[33m;[39m [90m// "user_xxx"[39m[0m
 GET /api/wishlists [31m500[39m in 349ms
 [32m[1mâœ“[22m[39m Compiled middleware in 3ms
 [32m[1mâœ“[22m[39m Compiled in 33ms
 [32m[1mâœ“[22m[39m Compiled middleware in 2ms
 [32m[1mâœ“[22m[39m Compiled in 22ms
 [33m[1mâš [22m[39m Unsupported metadata themeColor is configured in metadata export in /wishlists. Please move it to viewport export instead.
Read more: https://nextjs.org/docs/app/api-reference/functions/generate-viewport
 GET /wishlists [32m200[39m in 86ms
 POST /wishlists [32m200[39m in 83ms
 GET /favicon.ico?favicon.0b3bf435.ico [32m200[39m in 318ms
[GET /api/wishlists] ERROR: Error: Clerk: auth() was called but Clerk can't detect usage of clerkMiddleware(). Please ensure the following:
- Your Middleware exists at ./src/middleware.(ts|js)
- clerkMiddleware() is used in your Next.js Middleware.
- Your Middleware matcher is configured to match this route or page.
- If you are using the src directory, make sure the Middleware file is inside of it.

For more details, see https://clerk.com/err/auth-middleware

    at async ensureDbUser (src/lib/user.ts:7:14)
    at async GET (src/app/api/wishlists/route.ts:28:18)
[0m [90m  5 |[39m
 [90m  6 |[39m [36mexport[39m [36masync[39m [36mfunction[39m ensureDbUser() {
[31m[1m>[22m[39m[90m  7 |[39m   [36mconst[39m cu [33m=[39m [36mawait[39m currentUser()[33m;[39m
 [90m    |[39m              [31m[1m^[22m[39m
 [90m  8 |[39m   [36mif[39m ([33m![39mcu) [36mthrow[39m [36mnew[39m [33mError[39m([32m"UNAUTHENTICATED"[39m)[33m;[39m
 [90m  9 |[39m
 [90m 10 |[39m   [36mconst[39m clerkId [33m=[39m cu[33m.[39mid[33m;[39m [90m// "user_xxx"[39m[0m
 GET /api/wishlists [31m500[39m in 358ms
 [33m[1mâš [22m[39m Unsupported metadata themeColor is configured in metadata export in /wishlists. Please move it to viewport export instead.
Read more: https://nextjs.org/docs/app/api-reference/functions/generate-viewport
 GET /wishlists [32m200[39m in 91ms
 POST /wishlists [32m200[39m in 131ms
 GET /favicon.ico?favicon.0b3bf435.ico [32m200[39m in 380ms
[GET /api/wishlists] ERROR: Error: Clerk: auth() was called but Clerk can't detect usage of clerkMiddleware(). Please ensure the following:
- Your Middleware exists at ./src/middleware.(ts|js)
- clerkMiddleware() is used in your Next.js Middleware.
- Your Middleware matcher is configured to match this route or page.
- If you are using the src directory, make sure the Middleware file is inside of it.

For more details, see https://clerk.com/err/auth-middleware

    at async ensureDbUser (src/lib/user.ts:7:14)
    at async GET (src/app/api/wishlists/route.ts:28:18)
[0m [90m  5 |[39m
 [90m  6 |[39m [36mexport[39m [36masync[39m [36mfunction[39m ensureDbUser() {
[31m[1m>[22m[39m[90m  7 |[39m   [36mconst[39m cu [33m=[39m [36mawait[39m currentUser()[33m;[39m
 [90m    |[39m              [31m[1m^[22m[39m
 [90m  8 |[39m   [36mif[39m ([33m![39mcu) [36mthrow[39m [36mnew[39m [33mError[39m([32m"UNAUTHENTICATED"[39m)[33m;[39m
 [90m  9 |[39m
 [90m 10 |[39m   [36mconst[39m clerkId [33m=[39m cu[33m.[39mid[33m;[39m [90m// "user_xxx"[39m[0m
 GET /api/wishlists [31m500[39m in 460ms
 [33m[1mâš [22m[39m Unsupported metadata themeColor is configured in metadata export in /wishlists. Please move it to viewport export instead.
Read more: https://nextjs.org/docs/app/api-reference/functions/generate-viewport
 GET /wishlists [32m200[39m in 97ms
 POST /wishlists [32m200[39m in 69ms
 GET /favicon.ico?favicon.0b3bf435.ico [32m200[39m in 310ms
[GET /api/wishlists] ERROR: Error: Clerk: auth() was called but Clerk can't detect usage of clerkMiddleware(). Please ensure the following:
- Your Middleware exists at ./src/middleware.(ts|js)
- clerkMiddleware() is used in your Next.js Middleware.
- Your Middleware matcher is configured to match this route or page.
- If you are using the src directory, make sure the Middleware file is inside of it.

For more details, see https://clerk.com/err/auth-middleware

    at async ensureDbUser (src/lib/user.ts:7:14)
    at async GET (src/app/api/wishlists/route.ts:28:18)
[0m [90m  5 |[39m
 [90m  6 |[39m [36mexport[39m [36masync[39m [36mfunction[39m ensureDbUser() {
[31m[1m>[22m[39m[90m  7 |[39m   [36mconst[39m cu [33m=[39m [36mawait[39m currentUser()[33m;[39m
 [90m    |[39m              [31m[1m^[22m[39m
 [90m  8 |[39m   [36mif[39m ([33m![39mcu) [36mthrow[39m [36mnew[39m [33mError[39m([32m"UNAUTHENTICATED"[39m)[33m;[39m
 [90m  9 |[39m
 [90m 10 |[39m   [36mconst[39m clerkId [33m=[39m cu[33m.[39mid[33m;[39m [90m// "user_xxx"[39m[0m
 GET /api/wishlists [31m500[39m in 335ms
[?25h
